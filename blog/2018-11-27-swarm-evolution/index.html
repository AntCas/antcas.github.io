<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-blog-post-js.58eb99be367515580533.css">.header{margin-bottom:24px;font-family:Helvetica,sans-serif;-webkit-animation:fade-in 1.5s;animation:fade-in 1.5s}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.header .header-subcontainer{margin:0 auto;max-width:980;padding:16px;display:flex;flex-direction:row;align-items:center}.header .header-subcontainer .root-icon-container{margin:0;cursor:pointer}.header .header-subcontainer .root-icon-container:hover{opacity:.75}.header .header-subcontainer .root-icon-container .root-icon{fill:#333;height:48px;width:48px}.header .header-subcontainer ul.links{display:inline-flex;flex-direction:row;margin-left:auto;list-style:none}.header .header-subcontainer ul.links .item-link{height:24px;width:24px;margin:0 12px;position:relative;color:#000;text-decoration:none;cursor:pointer}.header .header-subcontainer ul.links .item-link .item-image{height:24px;width:24px;fill:#333}.header .header-subcontainer ul.links .item-link .item-image:hover{opacity:.75}.header .header-subcontainer ul.links .item-link .twitter{height:27px}.footer{margin-top:auto;font-family:Courier,monospace;color:#333;display:flex;flex-direction:column;align-items:center}.footer .copyright{margin-top:48px;margin-bottom:24px}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-collapse:collapse;border-spacing:0}body,html{min-height:100%;background:rgba(254,255,241,.67)}body .layout,html .layout{min-height:100vh}.email a,.email a:hover,.email a:visited{color:#00f;font-size:18px}@media (min-width:576px){.email a,.email a:hover,.email a:visited{font-size:24px}}.email a .hide,.email a:hover .hide,.email a:visited .hide{position:absolute;opacity:0;top:-5000px;left:-5000px}.email a:hover{opacity:.75}.cta{padding:24px 0;font-family:Courier,monospace;color:#000;display:flex;flex-direction:column;align-items:center;text-align:center;max-width:95%;margin:0 auto}.cta h2{font-size:24px}.cta .email{margin:24px auto 0}.page-break{display:flex;flex-direction:row;justify-content:center;margin:24px auto}.page-break .bullet{height:5px;width:5px;margin:0 12px;border-radius:5px;background-color:#333}.template .blog-post-container{max-width:95%;margin:auto;min-height:100vh;font-family:Helvetica,sans-serif}@media (min-width:768px){.template .blog-post-container{max-width:65%}}@media (min-width:992px){.template .blog-post-container{max-width:50%}}.template .blog-post-container ol,.template .blog-post-container ul{padding-left:32px}.template .blog-post-container ol{list-style:1}.template .blog-post-container li{margin-top:6px}.template .blog-post-container h1,.template .blog-post-container h2,.template .blog-post-container h3{font-weight:700;margin-top:18px}.template .blog-post-container ol,.template .blog-post-container p,.template .blog-post-container ul{margin-top:12px}.template .blog-post-container code,.template .blog-post-container h1,.template .blog-post-container h2,.template .blog-post-container h3,.template .blog-post-container li,.template .blog-post-container ol,.template .blog-post-container p{line-height:1.5;color:#333}.template .blog-post-container h1{font-size:32px}.template .blog-post-container h2{font-size:24px}.template .blog-post-container h3,.template .blog-post-container li,.template .blog-post-container p{font-size:18px}.template .blog-post-container code{background:#fffccc;padding:3px 6px;border-radius:3px;font-family:Courier,monospace;font-weight:700}.template .blog-post-container img{max-width:100%}.template .blog-post-container blockquote p{max-width:100%;display:flex;flex-direction:row}.template .blog-post-container blockquote p img{width:25%;height:25%}.template .blog-post-container .blog-title-card{position:relative;width:100%;border-radius:4px;overflow:hidden}.template .blog-post-container .blog-title-card .blog-title,.template .blog-post-container .blog-title-card .shade{height:99%;width:100%;position:absolute;top:0;border-radius:4px}.template .blog-post-container .blog-title-card .shade{opacity:.45}.template .blog-post-container .blog-title-card img{border-radius:4px;width:100%}.template .blog-post-container .blog-title-card .blog-title{display:flex;align-items:center;justify-content:center}.template .blog-post-container .blog-title-card .blog-title h1{font-family:Helvetica,sans-serif;font-weight:700;color:#fff;opacity:1;font-size:24px;text-align:center;max-width:80%;margin:0}@media (min-width:768px){.template .blog-post-container .blog-title-card .blog-title h1{font-size:56px}}.template table{margin-top:48px;width:100%}.template table td,.template table th{text-align:center;padding:16px 24px}.template table thead{font-weight:700}.template table thead tr{background:#c3beff}.template table tbody tr:nth-child(2n){background:#f2f1ff}.template .home-link,.template .home-link:visited{display:flex;flex-direction:column;width:100%;align-items:center;margin-top:48px;cursor:pointer;color:#00f;font-family:Courier,monospace}.template .home-link:hover,.template .home-link:visited:hover{opacity:.75}.template .home-link .root-icon-container,.template .home-link:visited .root-icon-container{margin:0}.template .home-link .root-icon-container .root-icon,.template .home-link:visited .root-icon-container .root-icon{fill:#333;height:48px;width:48px}.template .cta-wrapper{padding-top:52px}</style><meta name="generator" content="Gatsby 2.0.52"/><title data-react-helmet="true">Anthony Castrio - Swarm Evolution</title><meta data-react-helmet="true" name="description" content="Anthony Castrio - Product Manager and Software Engineer"/><meta data-react-helmet="true" name="keywords" content="software engineering, software, websites, product management, portfolio, product"/><meta data-react-helmet="true" name="image" content="http://castrio.me/images/preview-image.png"/><meta data-react-helmet="true" property="og:title" content="Anthony Castrio"/><meta data-react-helmet="true" property="og:description" content="Product Management and Software Engineering"/><meta data-react-helmet="true" property="og:url" content="https://castrio.me"/><meta data-react-helmet="true" property="og:image" content="http://castrio.me/images/preview-image.png"/><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-117407998-1', 'auto', {});
      
      }
      </script><link as="script" rel="preload" href="/component---src-templates-blog-post-js-ac326ee7cdb433698841.js"/><link as="script" rel="preload" href="/0-04dd8583a06680b702f2.js"/><link as="script" rel="preload" href="/app-ede6879be3f93d7a66dd.js"/><link as="script" rel="preload" href="/webpack-runtime-7b52011dcc48035f8795.js"/><link rel="preload" href="/static/d/131/path---blog-2018-11-27-swarm-evolution-a-59-988-iRtIUoHLKwyNM6fwKFTIqVEgzI.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><div class="header"><div class="header-subcontainer"><div class="root-icon-container"><a href="/"><div></div></a></div><ul class="links"><li class="item-link"><a href="https://twitter.com/AnthonyCastrio"><div></div></a></li><li class="item-link"><a href="https://www.linkedin.com/in/antcas/"><div></div></a></li><li class="item-link"><a href="https://github.com/AntCas"><div></div></a></li></ul></div></div><div class="layout"><div class="matches"><div><div class="template"><div class="blog-post-container"><div class="blog-post"><h3>November 27, 2018 • Medellín, Colombia</h3><div class="blog-title-card"><img alt="Swarm Evolution" src="/images/blog//swarmvolution/swarm-evolution.png"/><div class="shade" style="background:#000"></div><div class="blog-title"><h1>Swarm Evolution</h1></div></div><div class="blog-post-content"><h1>Emergent Swarm-Like Behaviour</h1>
<p>This weekend I worked on a project.</p>
<p>I wanted to find out what conditions give rise to emergent swarm-like behaviors in a population.</p>
<p>I’m trying to answer this problem by running an evolution simulation.</p>
<p>I have an environment with two types of creature.</p>
<p>Creature A is populous and small. The longer they live, the more chances they get to breed. We’ll call this our prey creature.</p>
<p>Creature B has a small population, they are bigger and faster. The more prey they eat, the stronger they are, and the more chances they get to breed. We’ll call this our predator creature.</p>
<p><img src="/images/blog/swarmvolution/swarm.gif" alt="Two types of creatures swarming around each other." title="Swarming Creatures"></p>
<h2>Evolution</h2>
<p>The creatures have a genetic breeding mechanism. They have “genes” that control their behavior and senses that allow them to detect whether they are near an ally or an enemy.</p>
<p>Creatures don’t innately know whether which is which, at first. They must learn who is who, and how to respond to each, through evolution.</p>
<p>Prey that get eaten quickly don’t breed as much as prey who survive a long time. Therefore, genes that help prey stay alive should be passed down more often than genes that get prey eaten. Over time, the whole population of prey should consist of individuals who’s ancestors were good at not getting eaten.</p>
<p>It’s a similar story with the Predators. Predators that don’t eat, don’t get to breed as much as Predators that do. Predators who eat the most prey will dominate the breeding pool. Over time, the whole population of predators should consist of individuals who’s ancestors were good at eating prey.</p>
<h2>Behaviour</h2>
<p>With these constraints in place, can prey creatures develop cooperative behavior? Would predators learn to pack hunt? Will prey swarm, or simply evade?</p>
<p>If these factors are not sufficient, then what other factors must be present before swarming or pack-hunting behavior emerges? How complex must their brains be? What evolutionary pressures must exist? How does their physiology affect their behavior?</p>
<p>Both predator and prey have the same “brain” structure. Their behavioral difference are currently only affected by their dna. The Predators are a bit bigger and faster and can see a bit farther, but there are less than them.</p>
<p>What happens if we change their morphology? e.g. what if prey are big and predators are small? What if we change how far they can see? The directions in which they can see? How well they can see what they’re looking at?</p>
<p>I hope to find a very simple set of criteria that allow these behaviors to emerge. It may just take a long time.</p>
<h1>What do creatures look like?</h1>
<p><img src="/images/blog/swarmvolution/Body.svg" alt="Diagram of organism showing how body size and vision range are defined by concentric circles" title="Body Diagram"></p>
<p>Each creature has a circular body.</p>
<p>They can sense creatures near to them in four continuous directions, equally spaced around their body.</p>
<p>In each direction they can see how close their nearest ally (like organism) is and how close their nearest opponent (different organism) is.</p>
<p>In each direction of sight they have one neuron for enemy-detection and one neuron for ally-detection.</p>
<p><img src="/images/blog/swarmvolution/Senses.svg" alt="Diagram showing evenly spaced vision neurons around circular body of organism" title="Senses Diagram"></p>
<p>Therefore, if there is more than one enemy or ally in a certain direction, they can only sense the nearest.</p>
<p>They are in a way both “near-sighted” and “round-sighted”. They can see the closest enemy or ally to them in all directions and they have a sense of how far away that creature is within the limits of their vision.</p>
<p>If there are no creatures within their visual range, then they can’t see anything.</p>
<p>Imagine they are fish in the ocean. Beyond a certain point, all they can see is the darkness of the ocean.</p>
<h1>How do creatures move?</h1>
<p><img src="/images/blog/swarmvolution/Move.svg" alt="Diagram showing organism can rotate orientation left or right" title="Movement Diagram"></p>
<p>Each creature moves at a constant rate of speed.They can not choose to speed up or slow down.</p>
<p>Unless they choose to turn, they will continue to move in a straight line. The direction of travel is described by their orientation.</p>
<p>When they turn, it is at a constant rate of rotation. In other words, no sharp turns, they have a fixed turning radius.</p>
<p>Each of these attributes is something that may be adjusted. What would happen if we gave creatures control over their turning radius? Their speed?</p>
<h1>How do their brains work?</h1>
<p>Their brains are a neural network.</p>
<p>The human brain is made of many interconnected neurons. When one neuron receives an electric charge it may or may not pass that charge on to any of the many neurons it is connected to.</p>
<p>A neural net operates in the same way. It’s like a very simple model of a biological neural system.</p>
<h2>Neurons and Perceptrons</h2>
<p>In the human brain, the base unit is the neuron:</p>
<p><img src="/images/blog/swarmvolution/neuron.png" alt="Diagram of a human neuron" title="Neuron"></p>
<p>In the computer neural network, the base unit is the perceptron:</p>
<p><img src="/images/blog/swarmvolution/perceptron.png" alt="Diagram of a software perceptron" title="Perceptron"></p>
<p>the perceptron has inputs and outputs, just like a neuron.</p>
<p>Instead of electricity, the perceptron receives a number from each of the perceptrons connected to its inputs.</p>
<p>the perceptron has a setting for each input that tells it how much to care about that input. We call these settings “weights”.</p>
<p>If a perceptron weights one input highly, it cares about that input a lot, and will output a higher number in response.</p>
<p>The perceptron sense a number to each of its output based on the result of an activation function.</p>
<p>The activation function receives a number based on the combined weights of the inputs and outputs a new number that is sent to the output neighbors.</p>
<h2>Neural Networks</h2>
<p>We usually organize these perceptrons into “layers”. In the case of our organisms, we have 3 layers.</p>
<p>At the top is the Input layer. It’s the numbers are sense neurons receive. Since we have 4 directions our organism can see in and 2 perceptrons per direction, our input layer has 8 perceptrons in total.</p>
<p>At the bottom is our output layer. Our organism can rotate clockwise or counterclockwise. That’s 2 options, so the organism gets two output perceptrons.</p>
<p>In the middle of the two, we have a “hidden” layer. This layer exists so that the organism can learn more complex behavior. A neural network can have many layers and each layer can have any number of nodes.</p>
<p>In our case our organism have just one hidden layer and that hidden layer has just 4 nodes. </p>
<p><img src="/images/blog/swarmvolution/nn.svg" alt="Diagram of a neural network" title="Neural Network"></p>
<p>A neural network “learns” by adjusting the weights of all the connections among its perceptrons to get a better answer. </p>
<p>There’s a lot of weighs a computer can figure out the best set of weights.</p>
<p>For our purposes we are going to use evolution.</p>
<h1>How do the organisms evolve?</h1>
<p>Each organism has a DNA which defines its behavior. This “DNA” is actually just the set of weights used by the neural network.</p>
<p>When two organisms breed, their offspring randomly inherits one of their parents weights or “genes” for a particular neural connection.</p>
<p>There is also a small chance of that neuron randomly mutating to be a different weight. These random changes simulate the random mutations found in nature which can cause new behaviors to emerge at random. </p>
<p>If the new gene causes a behavior that helps the organism survive, it will be more likely to pass down that gene.</p>
<h2>How do they organisms choose who to breed with?</h2>
<p>Each organism in our model breeds at least once. If they are fitter than the population as a whole, they will get more chances to breed again.</p>
<p>The fitter the organism, the more likely it is to breed multiple times.</p>
<p>We can think of the gene pool as a kind of roulette wheel where fitter organisms take up a larger wedge of the wheel. </p>
<p>At the end of a round of the simulation, the old generation is replaced with their offspring. </p>
<p>[ link to shiffman ]</p>
<h1>What are the results so far?</h1>
<p>The untrained organisms were surprisingly intelligent. Even without training, the structure of their brains makes them move around in a way that looks not unlike real creatures.</p>
<p>So far I’ve only run the simulation up to 100 generations and with only small tweaks. At times the organisms do follow each other around in what you could describe as a kind of porto-swarm behavior. </p>
<p>I think it will take 2-10 times longer to see this porto-swarm behavior develop into something more obviously swarm-like.</p>
<p>From my initial observations, I also suspect that the organism will need better, denser vision in order to develop the behavior we’re looking for. As well as finer control over their turning radius. </p>
<h1>Next Steps</h1>
<p>With the way their field of vision works right now, they can’t tell the difference between a creature right in front of them and one 90 degrees away if those creatures are close to the boundaries of their vision. </p>
<p>If they had more sight neurons, or if all their sight neurons were packed on one side of their body, they would be able to make finer adjustments in their motion.</p>
<p>My next experiments with this system will tweak their vision and orientation control in this way. I also want to experiment with much larger populations that live longer and breed over more generations.</p></div></div></div><a class="home-link" href="/"><div class="root-icon-container"></div><span>Back to Home</span></a><div class="cta-wrapper"><div class="page-break"><div class="bullet"></div><div class="bullet"></div><div class="bullet"></div></div><div class="cta"><h2>Want to work with me on a project like this? </h2><div class="email"><a href="mailto:anthonycastrio+public@gmail.com">anthonycastrio<span class="hide">+public</span>@gmail.com</a></div></div><div class="page-break"><div class="bullet"></div><div class="bullet"></div><div class="bullet"></div></div></div></div></div></div></div><div class="footer"><div class="copyright">Copyright 2018, Anthony Castrio</div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"blog-2018-11-27-swarm-evolution-a59","path":"/blog/2018-11-27-swarm-evolution"};window.dataPath="131/path---blog-2018-11-27-swarm-evolution-a-59-988-iRtIUoHLKwyNM6fwKFTIqVEgzI";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-ede6879be3f93d7a66dd.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.58eb99be367515580533.css","/component---src-templates-blog-post-js-ac326ee7cdb433698841.js"],"component---src-pages-404-js":["/component---src-pages-404-js-e3891a364b66a06c8abc.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js.44698a91c75e4f86d0bb.css","/component---src-pages-blog-js-a6da019cf0b459002f8f.js"],"component---src-pages-index-js":["/component---src-pages-index-js.68185465ac498eb7e86b.css","/component---src-pages-index-js-6b90330b719b1f1c0d41.js"],"component---src-pages-projects-js":["/component---src-pages-projects-js.44698a91c75e4f86d0bb.css","/component---src-pages-projects-js-a512cfd3ba51db8686eb.js"]};/*]]>*/</script><script src="/webpack-runtime-7b52011dcc48035f8795.js" async=""></script><script src="/app-ede6879be3f93d7a66dd.js" async=""></script><script src="/0-04dd8583a06680b702f2.js" async=""></script><script src="/component---src-templates-blog-post-js-ac326ee7cdb433698841.js" async=""></script></body></html>